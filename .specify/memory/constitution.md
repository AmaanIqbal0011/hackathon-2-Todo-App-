<!--
  Sync Impact Report
  Version change: N/A -> 1.0.0
  Modified principles:
    - [PRINCIPLE_1_NAME] -> I. Spec-First, Always
    - [PRINCIPLE_2_NAME] -> II. No Manual Coding
    - [PRINCIPLE_3_NAME] -> III. Specs Are the Single Source of Truth
    - [PRINCIPLE_4_NAME] -> IV. Stateless Services
    - [PRINCIPLE_5_NAME] -> V. Tool-Based AI Interaction
    - [PRINCIPLE_6_NAME] -> VI. Event-Driven by Default
  Added sections:
    - Required Technology Stack
    - Quality & Engineering Standards
    - AI Agent Rules
    - Hackathon Compliance
  Templates requiring updates:
    - .specify/templates/plan-template.md (✅ updated)
    - .specify/templates/spec-template.md (✅ updated)
    - .specify/templates/tasks-template.md (✅ updated)
  Follow-up TODOs: None
-->
# AI-Native Distributed Todo App Constitution

## Core Principles

### I. Spec-First, Always
- No code may be written before a complete and approved spec exists.
- All development must follow the SpecKitPlus lifecycle: **Specify → Plan → Tasks → Implement**.
- If a requirement is unclear, the agent must STOP and request a spec update.
**Rationale**: Ensures intentionality and precision in AI-driven development.

### II. No Manual Coding
- Human-written application code is **strictly forbidden**.
- All source code must be generated by AI agents (Claude Code) based on specs.
- Humans focus on refining specs, reviewing outputs, and iterating on requirements.
**Rationale**: Proves that clear specifications are the primary driver of high-quality software.

### III. Specs Are the Single Source of Truth
- If code and spec conflict, the spec wins.
- The hierarchy of authority is: Constitution → Specify → Plan → Tasks → Code.
- Agents must never “infer” requirements that are not explicitly specified.
**Rationale**: Eliminates ambiguity and ensures deterministic outcomes.

### IV. Stateless Services
- Backend services must remain stateless.
- All persistent state must be stored in PostgreSQL (Neon) or Dapr State Store (Phase V).
**Rationale**: Enables horizontal scalability and cloud-native resilience.

### V. Tool-Based AI Interaction
- AI agents must not directly manipulate the database.
- All Todo operations must be exposed as **MCP tools**.
- The agent can only act via approved tools.
**Rationale**: Enforces security, auditability, and clear interface boundaries.

### VI. Event-Driven by Default (Phase V)
- Task lifecycle events must be published to Kafka.
- Downstream services must consume events; no tight coupling between services.
**Rationale**: ensures a decoupled, extensible, and distributed architecture.

## Required Technology Stack

### Phase I: Minimal Console
- **Runtime**: Python 3.13+
- **Storage**: In-memory data storage
- **Interface**: Console-based interface

### Phase II: Web & Database
- **Frontend**: Next.js (App Router)
- **Backend**: FastAPI (Python)
- **ORM**: SQLModel
- **Database**: Neon Serverless PostgreSQL
- **Auth**: Better Auth (JWT-based)

### Phase III: AI Chatbot
- **Frontend UI**: OpenAI ChatKit
- **Agent Logic**: OpenAI Agents SDK
- **Integration**: Official MCP SDK
- **Architecture**: Stateless chat with database-persisted state

### Phase IV: Cloud-Native
- **Containerization**: Docker
- **Orchestration**: Kubernetes (Minikube)
- **Packaging**: Helm Charts
- **Ops**: kubectl-ai/kagent

### Phase V: Distributed Events
- **Messaging**: Kafka
- **Abstraction**: Dapr (Pub/Sub, State, Jobs, Secrets, Invocation)
- **Infrastructure**: Cloud Kubernetes (AKS, GKE, DOKS, or OKE)
- **CI/CD**: GitHub Actions

## Quality & Engineering Standards

### Deterministic Behavior
- Same input + same state = same output.
- Avoid hidden state, randomness, or implicit side effects.

### Clear Ownership & Isolation
- Users must only access their own tasks.
- JWT-based authentication is mandatory for all APIs after Phase II.
- Task ownership is enforced at every layer.

### Error Handling
- Errors must be explicit, human-readable, and recoverable.
- AI responses must gracefully explain failures (e.g., “Task not found”).

## AI Agent Rules

1. Never write code without a referenced Task ID.
2. Never modify architecture without updating `sp.plan`.
3. Never add features without updating `sp.specify`.
4. Never violate the defined technology stack.
5. Always reference spec sections when implementing.

## Hackathon Compliance

- All five phases must be completed in order.
- Partial submissions are allowed but scored proportionally.
- Bonus features (Urdu support, voice input, etc.) must be fully specified and architecturally justified.

## Governance

- This constitution is binding for all agents and contributors.
- Any change to architecture, stack, security model, or development rules requires an explicit update to this document.
- Agents must halt execution if constitutional violations are detected.

**Version**: 1.0.0 | **Ratified**: 2025-12-30 | **Last Amended**: 2025-12-30
